<div class="container">
  <div>
      <p>Agendamentos</p>
  </div>

  <div>
     <table>
        <thead>
          <tr>
            <th scope="col" class="table-title">ID</th>
            <th scope="col" class="table-title">Membro</th>
            <th scope="col" class="table-title">Vacina</th>
            <th scope="col" class="table-title">Local</th>
            <th scope="col" class="table-title">Data/Horário</th>
            <th scope="col" class="table-title">Valor</th>
            <th scope="col" class="table-title">Status</th>
          <br>
          </tr>
        </thead>
        <tbody>
          <% @appointments.each do |appointment| %>
            <tr>
              <td><%= appointment.id %></td>
              <td><%= appointment.member.first_name %> <%= appointment.member.last_name %></td>
              <td><%= appointment.vaccine.name %></td>
              <td><%= appointment.laboratory.name %>
                <%= appointment.laboratory.address %>
              </td>
              <td><%= appointment.date %></td>
              <td>R$<%= appointment.price %>,00</td>
              <td>
                <% if MemberVaccine.find_by(vaccine: appointment.vaccine, member: appointment.member).vaccinated == false %>
                  <%= form_tag vaccinate_path do %>
                    <%= hidden_field_tag :id, appointment.vaccine.id %>
                    <%= hidden_field_tag :member_id, appointment.member.id %>
                    <%= submit_tag "Não vacinado", class: 'btn btn-danger' %>
                  <% end %>
                <% else %>
                  <%= form_tag vaccinate_path do %>
                    <%= hidden_field_tag :id, appointment.vaccine.id %>
                    <%= hidden_field_tag :member_id, appointment.member.id %>
                    <%= submit_tag "Vacinado", class: 'btn btn-success' %>
                  <% end %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
  </div>
</div>
